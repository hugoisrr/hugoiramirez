{"componentChunkName":"component---src-templates-page-js","path":"/spinner-loading","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Display Spinner while loading data","date":"20 March 2020","path":"/spinner-loading","author":"Hugo I. Ramirez","excerpt":"Usually these operations are perform with libraries such as fetch/ajax. For the user might be cumbersome when he clicks a bottom or performs an action, he expects a response instead not action is shown or data is display, only after few seconds","tags":["react","react hooks"],"coverImage":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAAxklEQVQoz62RTQqEMAyFvf+JWnXhQj2GLpQWVBh14b8+TaFSZmidgQl80D7SlzTxXm0LISWyLIMQAk3ToCgKyEur61ppZVmiqirs+w6K4ziseHmegzGGMAzBOQf3fQRBgCiKkKYpkiQBu/Q4jrEsy21oCw8/hKuzu0OqOgyDYhxHhb6/69M0OaGRKEOdrB+akN73vTK25Wg+DE3MIjRHWsy6rtZOHw1NaMNd12Ge5+8NXVCONnv8Mm2GDi62bXvMIdSW8ec4AdO3B7nboOPHAAAAAElFTkSuQmCC","aspectRatio":1.9801980198019802,"src":"/static/b188fb94c95a1677ae1a3e7b0afa9c9b/422ae/loadingSpinner.png","srcSet":"/static/b188fb94c95a1677ae1a3e7b0afa9c9b/69585/loadingSpinner.png 200w,\n/static/b188fb94c95a1677ae1a3e7b0afa9c9b/497c6/loadingSpinner.png 400w,\n/static/b188fb94c95a1677ae1a3e7b0afa9c9b/422ae/loadingSpinner.png 669w","sizes":"(max-width: 669px) 100vw, 669px"}}}},"id":"15907b1a-193d-5dfb-8a60-b14aec8ce33f","html":"<h2>Why should I use a Spinner?</h2>\n<p>If your web application uses an API to fetch data from a server, these operations are asynchronous, which means that it takes some amount of time to fetch the data, meanwhile your web application can load other parts or work in other processes. Usually these operations are perform with libraries such as fetch/ajax. For the user might be cumbersome when he clicks a bottom or performs an action, he expects a response instead not action is shown or data is display, only after few seconds, however we can solve this issue by adding a validation a verify if the data has been loaded, then show the data, if not show a Spinner or loading message indicating that it might take some time.</p>\n<p>So what are the steps to perform a Spinner in React using React Hooks:</p>\n<ul>\n<li>Tracks any kind of async process based on promises (including async/await calls)</li>\n<li>Includes an HOC that can feed a loading component with the <em>loading</em> true/false flag</li>\n<li>Can be used from any part of the code (component, plain javascript, redux...)</li>\n<li>Keeps track of parallel asynchronous calls</li>\n<li>Keeps track of errors</li>\n<li>Allows you to define multiple areas</li>\n</ul>\n<h2>Spinner Component</h2>\n<p>This component can be imported by other components, it uses a Loading animation from bootstrap, the component is styled so that it will cover the with of the div parent.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//Spinner that renders when undefined data comes in as a result of no connection in the websocket</span>\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Fragment <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Spinner</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> spinnerStyle <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    width<span class=\"token operator\">:</span> <span class=\"token string\">\"10rem\"</span><span class=\"token punctuation\">,</span>\n    height<span class=\"token operator\">:</span> <span class=\"token string\">\"10rem\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Fragment<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"d-flex justify-content-center\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"spinner-border my-5\"</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>spinnerStyle<span class=\"token punctuation\">}</span> role<span class=\"token operator\">=</span><span class=\"token string\">\"status\"</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>span className<span class=\"token operator\">=</span><span class=\"token string\">\"sr-only\"</span><span class=\"token operator\">></span>Loading<span class=\"token operator\">...</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Fragment<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Spinner imported and use in another component</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Spinner <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../layout/Spinner\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Verifies if there are Workstations and Data is been received, if not it renders a Spinner</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>wks<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> wksMap<span class=\"token punctuation\">.</span>size <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>ContentAPI\n      title<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span>\n      websocketStatus<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>websocketStatus<span class=\"token punctuation\">}</span>\n      change<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleSwitch<span class=\"token punctuation\">}</span>\n      dropdown\n    <span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"row\"</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span>currentDevice <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>SelectDevice<span class=\"token operator\">></span>Select Device<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>SelectDevice<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>DeviceCard currentDevice<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>currentDevice<span class=\"token punctuation\">}</span> wks<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>wks<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ContentAPI<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>ContentAPI\n      title<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span>\n      websocketStatus<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>websocketStatus<span class=\"token punctuation\">}</span>\n      change<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleSwitch<span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>Spinner <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ContentAPI<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","excerpt":"Why should I use a Spinner? If your web application uses an API to fetch data from a server, these operations are asynchronous, which meansâ€¦"}},"pageContext":{"type":"posts","next":null,"previous":{"frontmatter":{"path":"/websocket-usecontext","title":"Store data from WebSocket in useContext","tags":["react","react hooks"]},"fileAbsolutePath":"/home/hugo/Sites/Personal/hugoiramirez.com/src/posts/April_2_2020_Websocket_useContext.md"}}}}